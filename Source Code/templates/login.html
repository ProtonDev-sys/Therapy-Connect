{% extends "footer.html" %}
{% block Footercontent %}

<!DOCTYPE html>
<html>
  <head>
    <title>Login</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/login.css') }}">
    
  </head>
  <body>
    <div id ="particles-js"></div>
    <script type="text/javascript" src="{{ url_for('static', filename='js/particles.js') }}"> </script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/form-background.js') }}"> </script>
    <div class="header">
        <span class ="titleText">Login</span>
    </div>
    
    <form id = "login-form">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username"><br>
      <label for="password">Password:</label>
      <input type="password" id="password" name="password"><br>
      
      <input type="submit" value="Login">
      <p>Don't have an account? <a href="/register">Register here</a></p>
      <p id="login-error"></p>
    </form>
    
  
  <script>
    const loginForm = document.getElementById("login-form");
    const errorElement = document.getElementById("login-error");

    loginForm.addEventListener("submit", async (event) => {
        event.preventDefault();
        const formData = new FormData(event.target);
        const response = await fetch("/login", {
            method: "POST",
            body: formData,
        });

        const data = await response.json();
        if (data.ERROR) {
            errorElement.textContent = data.ERROR
        } else {
            window.location.href = "/profile";
        }
    });
  </script>
  
  
  
</body>
</html>
{% endblock %}